document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".tab"),e=document.querySelectorAll(".tab-content"),n=document.querySelector(".menu-btn"),o=document.querySelector(".menu-overlay"),c=document.querySelector(".close-menu"),a=document.getElementById("cloak-select"),i=document.getElementById("apply-cloak"),l=document.getElementById("games-list"),r=document.getElementById("chat-messages"),d=document.getElementById("chat-input"),s=document.getElementById("send-btn"),m=[{name:"1v1.LOL",file:"1v1lol.html"},{name:"Retro Bowl",file:"retro-bowl.html"},{name:"Slope",file:"slope.html"},{name:"Cookie Clicker",file:"cookie-clicker.html"},{name:"Drift Hunters",file:"drift-hunters.html"},{name:"Shell Shockers",file:"shellshockers.html"},{name:"Basketball Stars",file:"basketball-stars.html"},{name:"BitLife",file:"bitlife.html"},{name:"Krunker",file:"krunker.html"},{name:"Subway Surfers",file:"subway-surfers.html"}];t.forEach(t=>{t.addEventListener("click",()=>{t.forEach(t=>t.classList.remove("active")),e.forEach(t=>t.classList.add("hidden")),t.classList.add("active"),document.getElementById(t.dataset.tab+"-tab").classList.remove("hidden"),"games"===t.dataset.tab&&g()})}),n.onclick=()=>o.classList.remove("hidden"),c.onclick=()=>o.classList.add("hidden"),o.onclick=t=>{t.target===o&&o.classList.add("hidden")},i.onclick=()=>{const t=a.value,e={google:{title:"Google",icon:"https://google.com/favicon.ico"},drive:{title:"My Drive - Google Drive",icon:"https://drive.google.com/favicon.ico"},classroom:{title:"Classes",icon:"https://classroom.google.com/favicon.ico"}}[t];document.title=e.title,document.querySelector('link[rel="icon"]').href=e.icon,o.classList.add("hidden")},s.onclick=u,d.addEventListener("keypress",t=>{"Enter"===t.key&&u()});function g(){l.innerHTML="",m.forEach(t=>{const e=document.createElement("li");e.textContent=t.name,e.onclick=()=>{window.location.href="games/"+t.file},l.appendChild(e)})}async function u(){const t=d.value.trim();if(!t)return;const e=document.createElement("div");e.innerHTML=`<b>You:</b> ${t}<br>`,r.appendChild(e),d.value="",r.scrollTop=r.scrollHeight;try{const n=await fetch("https://api.x.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:t}],model:"grok-beta"})});if(!n.ok)throw"error";const o=await n.json(),c=o.choices?.[0]?.message?.content||"no reply";const a=document.createElement("div");a.innerHTML=`<b>Grok:</b> ${c.replace(/\n/g,"<br>")}<br>`,r.appendChild(a)}catch(t){r.innerHTML+="<b>Grok:</b> offline (rate limited)<br>"}r.scrollTop=r.scrollHeight}});
